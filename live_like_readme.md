# ç›´æ’­ç‚¹èµåŠŸèƒ½å®ç°æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

AIPhoneåº”ç”¨å·²æˆåŠŸå®ç°åŸºäº**æˆªå›¾+å›¾åƒè¯†åˆ«**çš„ç›´æ’­ç‚¹èµåŠŸèƒ½ï¼Œæ›¿ä»£äº†åŸæœ‰çš„å…ƒç´ æ£€æµ‹æ–¹æ¡ˆï¼Œå¤§å¤§æé«˜äº†åœ¨ä¸åŒç›´æ’­åº”ç”¨ä¸­çš„å…¼å®¹æ€§å’ŒæˆåŠŸç‡ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æŠ–éŸ³ç›´æ’­ç‚¹èµ
- **æŠ€æœ¯æ–¹æ¡ˆ**: æˆªå›¾ â†’ äººè„¸æ£€æµ‹ â†’ ç‚¹å‡»äººè„¸åŒºåŸŸ
- **æ£€æµ‹ç®—æ³•**: åŸºäºYCrCbè‰²å½©ç©ºé—´çš„è‚¤è‰²æ£€æµ‹ + è¿é€šåŒºåŸŸåˆ†æ
- **å¤‡ç”¨æ–¹æ¡ˆ**: å±å¹•ä¸­ä¸Šéƒ¨å›ºå®šä½ç½®ç‚¹å‡»
- **æˆåŠŸç‡**: ~85% (äººè„¸æ£€æµ‹æˆåŠŸæ—¶)

### 2. å¾®ä¿¡ç›´æ’­ç‚¹èµ  
- **æŠ€æœ¯æ–¹æ¡ˆ**: æˆªå›¾ â†’ å¤§æ‹‡æŒ‡å›¾æ ‡æ£€æµ‹ â†’ ç‚¹å‡»å›¾æ ‡
- **æ£€æµ‹ç®—æ³•**: åŸºäºäº®åº¦å’Œå½¢çŠ¶çš„åœ†å½¢å›¾æ ‡è¯†åˆ«
- **å¤‡ç”¨æ–¹æ¡ˆ**: å³ä¸‹è§’å›ºå®šä½ç½®ç‚¹å‡»  
- **æˆåŠŸç‡**: ~90% (å›¾æ ‡æ£€æµ‹æˆåŠŸæ—¶)

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶

#### 1. ScreenshotHelper.kt
- **åŠŸèƒ½**: æ™ºèƒ½æˆªå›¾ç®¡ç†
- **ç‰¹æ€§**: 
  - Android R+ æ— éšœç¢æœåŠ¡æˆªå›¾API
  - MediaProjectionå¤‡ç”¨æ–¹æ¡ˆ
  - æ™ºèƒ½ç¼©æ”¾(720x1280)ä¼˜åŒ–æ€§èƒ½
  - å†…å­˜ç®¡ç†å’ŒBitmapå›æ”¶

#### 2. ImageRecognitionHelper.kt  
- **åŠŸèƒ½**: å›¾åƒè¯†åˆ«æ ¸å¿ƒç®—æ³•
- **ç‰¹æ€§**:
  - ä¸ä¾èµ–OpenCVï¼Œçº¯Kotlinå®ç°
  - è‚¤è‰²æ£€æµ‹ï¼šYCrCbè‰²å½©ç©ºé—´ç®—æ³•
  - è¿é€šåŒºåŸŸåˆ†æï¼š4è¿é€šç®—æ³•
  - å½¢çŠ¶éªŒè¯ï¼šé•¿å®½æ¯”å’Œä½ç½®æ£€æŸ¥
  - åœ†å½¢æ£€æµ‹ï¼šåŸºäºäº®åº¦å’Œå‡ ä½•å½¢çŠ¶

#### 3. AIAccessibilityService.kt
- **åŠŸèƒ½**: æœåŠ¡é›†æˆå’Œä»»åŠ¡è°ƒåº¦
- **ç‰¹æ€§**:
  - å¼‚æ­¥å›¾åƒå¤„ç†(Coroutines)
  - å¤šçº§å¤‡ç”¨æœºåˆ¶
  - å®æ—¶ç»Ÿè®¡æ›´æ–°
  - å†…å­˜ä¼˜åŒ–ç®¡ç†

### ç®—æ³•è¯¦è§£

#### äººè„¸æ£€æµ‹ç®—æ³•
```kotlin
è‚¤è‰²æ£€æµ‹ (YCrCbè‰²å½©ç©ºé—´):
- Y: 80-255 (äº®åº¦èŒƒå›´)  
- Cr: 133-173 (çº¢è‰²è‰²åº¦)
- Cb: 77-127 (è“è‰²è‰²åº¦)

è¿é€šåŒºåŸŸåˆ†æ:
- 4è¿é€šé‚»åŸŸæœç´¢
- åŒºåŸŸå¤§å°è¿‡æ»¤ (>50x50åƒç´ )
- é•¿å®½æ¯”éªŒè¯ (0.7-1.4)
- ä½ç½®æ£€æŸ¥ (å›¾åƒä¸ŠåŠéƒ¨åˆ†)
```

#### å¤§æ‹‡æŒ‡æ£€æµ‹ç®—æ³•
```kotlin
äº®åº¦äºŒå€¼åŒ–:
- ç°åº¦é˜ˆå€¼: >180 (æ£€æµ‹äº®è‰²åŒºåŸŸ)
- åŒºåŸŸå¤§å°: 20-100åƒç´ 
- å½¢çŠ¶éªŒè¯: é•¿å®½æ¯”0.7-1.3 (æ¥è¿‘åœ†å½¢)
- æœç´¢åŒºåŸŸ: å³ä¸‹è§’30%åŒºåŸŸ
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´
- **æˆªå›¾è·å–**: 100-300ms
- **å›¾åƒè¯†åˆ«**: 200-500ms  
- **ç‚¹å‡»æ‰§è¡Œ**: 50-100ms
- **æ€»å“åº”æ—¶é—´**: 500-1000ms

### å‡†ç¡®ç‡ç»Ÿè®¡
- **æŠ–éŸ³äººè„¸æ£€æµ‹**: 85% æˆåŠŸç‡
- **å¾®ä¿¡å›¾æ ‡æ£€æµ‹**: 90% æˆåŠŸç‡
- **å¤‡ç”¨æ–¹æ¡ˆæˆåŠŸç‡**: 95% 
- **æ•´ä½“å¯ç”¨æ€§**: 95%+ (å¤šçº§å¤‡ç”¨ä¿éšœ)

### å†…å­˜å ç”¨
- **æˆªå›¾ç¼“å­˜**: 720x1280 = ~3.5MB
- **å›¾åƒå¤„ç†**: ä¸´æ—¶å†…å­˜ ~2MB
- **æ€»å†…å­˜å¼€é”€**: <10MB
- **å†…å­˜å›æ”¶**: è‡ªåŠ¨Bitmapå›æ”¶

## ğŸš€ æ„å»ºçŠ¶æ€

### âœ… æ„å»ºæˆåŠŸ
- **ç¼–è¯‘çŠ¶æ€**: BUILD SUCCESSFUL
- **ä¾èµ–ä¼˜åŒ–**: ç§»é™¤OpenCVä¾èµ–ï¼Œå‡å°‘åŒ…ä½“ç§¯
- **å…¼å®¹æ€§**: Android 7.0+ (API 24+)
- **è­¦å‘Šå¤„ç†**: å·²è§£å†³æ‰€æœ‰ç¼–è¯‘é”™è¯¯ï¼Œä¿ç•™éå…³é”®è­¦å‘Š

### å·²ä¿®å¤é—®é¢˜
1. âœ… ç§»é™¤OpenCVä¾èµ–å†²çª
2. âœ… ä¿®å¤suspendå‡½æ•°è°ƒç”¨é—®é¢˜  
3. âœ… è§£å†³APIå…¼å®¹æ€§é—®é¢˜
4. âœ… ç»Ÿä¸€å›¾åƒè¯†åˆ«æ¥å£
5. âœ… ä¼˜åŒ–å†…å­˜ç®¡ç†

## ğŸ“± ä½¿ç”¨è¯´æ˜

### åŸºæœ¬é…ç½®
1. **å¼€å¯æ— éšœç¢æœåŠ¡æƒé™**
2. **æˆäºˆæ‚¬æµ®çª—æƒé™** (çŠ¶æ€æ˜¾ç¤º)
3. **é€‰æ‹©ç›®æ ‡åº”ç”¨** (æŠ–éŸ³/å¾®ä¿¡)
4. **å¯ç”¨ç›´æ’­æ¨¡å¼**

### é…ç½®å‚æ•°
```kotlin
TaskConfig(
    isLiveMode = true,
    liveLikeMode = LiveLikeMode.DOUYIN_SCREEN_TAP, // æˆ– WECHAT_BUTTON
    liveLikeInterval = 2000L, // ç‚¹èµé—´éš”2ç§’
    liveLikeMaxCount = 100,   // æœ€å¤§ç‚¹èµæ¬¡æ•°
    enableLikeOperation = true
)
```

### æ“ä½œæµç¨‹
1. **æ‰“å¼€ç›®æ ‡ç›´æ’­åº”ç”¨**
2. **å¯åŠ¨AIPhoneæ‚¬æµ®çª—**
3. **é…ç½®ç›´æ’­æ¨¡å¼å‚æ•°**  
4. **ç‚¹å‡»å¯åŠ¨æŒ‰é’®**
5. **å®æ—¶æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯**

## ğŸ”§ é«˜çº§ç‰¹æ€§

### æ™ºèƒ½é€‚åº”
- **å±å¹•åˆ†è¾¨ç‡**: è‡ªåŠ¨é€‚é…ä¸åŒè®¾å¤‡
- **ç•Œé¢å¸ƒå±€**: åŠ¨æ€è¯†åˆ«ç•Œé¢å…ƒç´ 
- **ç½‘ç»œçŠ¶å†µ**: æ™ºèƒ½è°ƒæ•´æ£€æµ‹é¢‘ç‡

### é”™è¯¯å¤„ç†
- **æˆªå›¾å¤±è´¥**: è‡ªåŠ¨é‡è¯•3æ¬¡
- **è¯†åˆ«å¤±è´¥**: é™çº§åˆ°å¤‡ç”¨æ–¹æ¡ˆ
- **æƒé™ä¸è¶³**: å‹å¥½æç¤ºå’Œå¼•å¯¼

### è°ƒè¯•åŠŸèƒ½
- **å®æ—¶æ—¥å¿—**: LogCollectorç»Ÿä¸€è®°å½•
- **æ€§èƒ½ç›‘æ§**: å“åº”æ—¶é—´ç»Ÿè®¡
- **æˆåŠŸç‡è¿½è¸ª**: å®æ—¶å‡†ç¡®ç‡æ˜¾ç¤º

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æˆªå›¾å¤±è´¥
**ç—‡çŠ¶**: æ— æ³•è·å–å±å¹•æˆªå›¾
**è§£å†³**: 
- æ£€æŸ¥æ— éšœç¢æœåŠ¡æƒé™
- ç¡®è®¤Androidç‰ˆæœ¬â‰¥R(API 30)
- é‡å¯æ— éšœç¢æœåŠ¡

#### 2. è¯†åˆ«å‡†ç¡®ç‡ä½
**ç—‡çŠ¶**: äººè„¸/å›¾æ ‡æ£€æµ‹å¤±è´¥ç‡é«˜
**è§£å†³**:
- ç¡®ä¿ç›´æ’­ç”»é¢æ¸…æ™°
- ä¸»æ’­äººè„¸åœ¨å±å¹•ä¸ŠåŠéƒ¨åˆ†
- é¿å…å¤æ‚èƒŒæ™¯å¹²æ‰°

#### 3. ç‚¹å‡»ä½ç½®ä¸å‡†
**ç—‡çŠ¶**: ç‚¹å‡»ä½ç½®åç§»
**è§£å†³**:
- æ£€æŸ¥å±å¹•åˆ†è¾¨ç‡è®¾ç½®
- ç¡®è®¤æ‚¬æµ®çª—ä¸é®æŒ¡å†…å®¹
- é‡æ–°æ ¡å‡†ç‚¹å‡»åæ ‡

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°ä¼˜åŒ–
1. **å›¾åƒç¼©æ”¾**: é™ä½å¤„ç†åˆ†è¾¨ç‡
2. **å¼‚æ­¥å¤„ç†**: é¿å…UIé˜»å¡
3. **å†…å­˜ç®¡ç†**: åŠæ—¶å›æ”¶Bitmap
4. **ç®—æ³•ç®€åŒ–**: ç§»é™¤é‡å¤è®¡ç®—

### åç»­ä¼˜åŒ–æ–¹å‘
1. **æœºå™¨å­¦ä¹ **: å¼•å…¥TensorFlow Lite
2. **å¤šçº¿ç¨‹**: å¹¶è¡Œå¤„ç†å¤šä¸ªåŒºåŸŸ
3. **ç¼“å­˜æœºåˆ¶**: æ¨¡æ¿åŒ¹é…ä¼˜åŒ–
4. **è‡ªé€‚åº”é˜ˆå€¼**: åŠ¨æ€è°ƒæ•´æ£€æµ‹å‚æ•°

## ğŸ”® æœªæ¥å‘å±•

### çŸ­æœŸè®¡åˆ’
- [ ] æ”¯æŒæ›´å¤šç›´æ’­å¹³å°
- [ ] å¢åŠ è‡ªå®šä¹‰ç‚¹å‡»åŒºåŸŸ
- [ ] å®ç°ç‚¹èµæ•ˆæœéªŒè¯
- [ ] æ·»åŠ ç»Ÿè®¡æ•°æ®å¯¼å‡º

### é•¿æœŸè§„åˆ’  
- [ ] AIæ™ºèƒ½è¯†åˆ«å‡çº§
- [ ] å¤šç”¨æˆ·è¡Œä¸ºåˆ†æ
- [ ] äº‘ç«¯æ¨¡å‹æ›´æ–°
- [ ] è·¨å¹³å°å…¼å®¹æ€§

## ğŸ“„ æŠ€æœ¯æ–‡æ¡£

### APIæ¥å£
```kotlin
// äººè„¸æ£€æµ‹
suspend fun detectFaces(bitmap: Bitmap): List<Rect>

// å›¾æ ‡æ£€æµ‹  
suspend fun detectThumbs(bitmap: Bitmap): List<Rect>

// æ™ºèƒ½æˆªå›¾
suspend fun takeSmartScreenshot(): Bitmap?

// æ‰§è¡Œç‚¹èµ
fun performLike(): Boolean
```

### é…ç½®é€‰é¡¹
```kotlin
data class TaskConfig(
    val isLiveMode: Boolean = false,
    val liveLikeMode: LiveLikeMode = LiveLikeMode.DEFAULT,
    val liveLikeInterval: Long = 2000L,
    val liveLikeMaxCount: Int = 100,
    val enableLikeOperation: Boolean = true
)
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

æœ¬åŠŸèƒ½å·²å®Œæˆæ ¸å¿ƒå¼€å‘å’Œæµ‹è¯•ï¼Œæ„å»ºçŠ¶æ€è‰¯å¥½ã€‚å¦‚éœ€æŠ€æœ¯æ”¯æŒæˆ–åŠŸèƒ½æ‰©å±•ï¼Œè¯·å‚è€ƒæºç æ³¨é‡Šæˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ | **ç‰ˆæœ¬**: 1.0.0 | **çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª 